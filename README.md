# 中小企業診断士二次試験対策 Web アプリ (試作版)

本リポジトリは、Streamlit を用いて構築した「中小企業診断士二次試験」学習支援アプリの試作実装です。年度・事例別の過去問演習、模擬試験モード、AI 風自動採点、学習履歴の可視化、CSV エクスポートなど、アウトラインで整理した主要機能をワンストップで体験できます。

> **Note:** OAuth や本番用の LLM 採点は未接続ですが、疑似スコアリングとデータ永続化を備えた MVP として動作します。

## クイックスタート

```bash
pip install -r requirements.txt
streamlit run app.py
```

初回起動時に `data/app.db` およびサンプル問題 (`data/seed_problems.json`) が自動生成されます。画面右側に表示されるフォームからアカウントを作成し、ログインして学習を開始してください。

## 実装済みの主な機能

| 機能 | 概要 |
| --- | --- |
| ログイン / 新規登録 | メールアドレスとパスワードでのサインインに対応。将来的な Google OAuth 連携を見据えた構造です。 |
| ホームダッシュボード | 演習回数・平均得点・達成率の KPI と、事例別平均得点の可視化を表示。 |
| 過去問演習 | 年度・事例で問題を検索し、設問ごとのテキストエリアで解答入力。文字数カウンターと下書き保存に対応し、送信すると自動採点が実行されます。 |
| 模擬試験モード | 指定セットまたはランダムに選んだ複数の事例をまとめて回答。タブで切り替えながら入力し、一括採点結果を表示します。 |
| AI 風採点・フィードバック | キーワードマッチと TF-IDF 類似度を組み合わせた疑似スコアリングを実装。得点・コメント・キーワード判定を提示します。 |
| 模範解答・解説表示 | 採点後に模範解答と解説を展開表示し、ユーザー答案との比較ができます。 |
| 学習履歴 | これまでの演習履歴一覧、得点推移の折れ線グラフ、個別結果の再表示、CSV エクスポートを提供します。 |
| プラン管理 | プレミアムプランへのアップグレードを模擬する UI。プラン情報は SQLite に永続化されます。 |

## データモデル概要

SQLite を用いて次のテーブルを管理します。

- `users`: ユーザー情報・プラン区分。
- `problems` / `questions`: 年度・事例ごとの問題と設問詳細、模範解答、解説、キーワード。
- `attempts` / `attempt_answers`: 演習・模試の受験記録と設問単位の採点結果。

サンプル問題データは `data/seed_problems.json` から読み込みます。必要に応じて編集・追加するとアプリ内に反映されます。

## AI 採点アルゴリズム（試作）

- **キーワード網羅率**: 重要キーワードが解答に含まれているかを判定。
- **文章類似度**: TF-IDF ベースのコサイン類似度で模範解答との近さを測定。
- **スコア統合**: 上記 2 指標を重み付けして得点化し、コメント内で不足キーワードや指標値を提示します。

本番運用では OpenAI API を用いた LLM 採点を組み込み、スコア調整や詳細フィードバックの高度化を想定しています。

## 今後の拡張アイデア

- Google OAuth 連携および有料プラン管理の実装
- LLM 採点とのハイブリッド評価・自動要約フィードバック
- 事例 IV 向け数値計算フォームや途中式チェック
- 模範解答の差分ハイライト、答案比較ビュー強化
- 学習分析ダッシュボードの高度化（ヒートマップや弱点診断）

## ライセンス

本リポジトリは学習用途のサンプル実装です。商用利用を行う際は適宜ライセンスやデータ利用に関する合意を取得してください。
