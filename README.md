# 中小企業診断士二次試験対策 Web アプリ (試作版)

本リポジトリは、Streamlit を用いて構築した「中小企業診断士二次試験」学習支援アプリの試作実装です。年度・事例別の過去問演習、模擬試験モード、AI 風自動採点、学習履歴の可視化、CSV エクスポートなど、アウトラインで整理した主要機能をワンストップで体験できます。

> **Note:** OAuth や本番用の LLM 採点は未接続ですが、疑似スコアリングとデータ永続化を備えた MVP として動作します。

## クイックスタート

```bash
pip install -r requirements.txt
streamlit run app.py
```

初回起動時に `data/app.db` およびサンプル問題 (`data/seed_problems.json`) が自動生成されます。画面右側に表示されるフォームからアカウントを作成し、ログインして学習を開始してください。

## 実装済みの主な機能

| 機能 | 概要 |
| --- | --- |
| ログイン / 新規登録 | メールアドレスとパスワードでのサインインに対応。将来的な Google OAuth 連携を見据えた構造です。 |
| ホームダッシュボード | 演習回数・平均得点・達成率の KPI と、事例別平均得点の可視化を表示。 |
| 過去問演習 | 年度・事例で問題を検索し、設問ごとのテキストエリアで解答入力。文字数カウンターと下書き保存に対応し、送信すると自動採点が実行されます。 |
| 模擬試験モード | 指定セットまたはランダムに選んだ複数の事例をまとめて回答。タブで切り替えながら入力し、一括採点結果を表示します。 |
| AI 風採点・フィードバック | キーワードマッチと TF-IDF 類似度を組み合わせた疑似スコアリングを実装。得点・コメント・キーワード判定を提示します。 |
| 模範解答・動画解説・図解表示 | 採点後に模範解答と解説を展開表示し、動画解説の倍速・スキップ視聴や図解コンテンツで論点整理ができます。 |
| 学習履歴 | これまでの演習履歴一覧、得点推移の折れ線グラフ、個別結果の再表示、CSV エクスポートを提供します。 |
| 復習スケジュール（間隔反復） | 採点結果に応じて次回の復習タイミングを自動提案し、ダッシュボードと各ページで再提示します。 |
| プラン管理 | プレミアムプランへのアップグレードを模擬する UI。プラン情報は SQLite に永続化されます。 |

## データモデル概要

SQLite を用いて次のテーブルを管理します。

- `users`: ユーザー情報・プラン区分。
- `problems` / `questions`: 年度・事例ごとの問題と設問詳細、模範解答、解説、キーワード。
- `attempts` / `attempt_answers`: 演習・模試の受験記録と設問単位の採点結果。
- `reminders` / `spaced_reviews`: 通知設定と、得点に基づいて算出された復習スケジュール。

サンプル問題データは `data/seed_problems.json` から読み込みます。必要に応じて編集・追加するとアプリ内に反映されます。

## AI 採点アルゴリズム（試作）

- **キーワード網羅率**: 重要キーワードが解答に含まれているかを判定。
- **文章類似度**: TF-IDF ベースのコサイン類似度で模範解答との近さを測定。
- **スコア統合**: 上記 2 指標を重み付けして得点化し、コメント内で不足キーワードや指標値を提示します。

本番運用では OpenAI API を用いた LLM 採点を組み込み、スコア調整や詳細フィードバックの高度化を想定しています。

## 今後の拡張アイデア

- Google OAuth 連携および有料プラン管理の実装
- LLM 採点とのハイブリッド評価・自動要約フィードバック
- 事例 IV 向け数値計算フォームや途中式チェック
- 模範解答の差分ハイライト、答案比較ビュー強化
- 学習分析ダッシュボードの高度化（ヒートマップや弱点診断）

## 過去問演習 UI 改修の QA チェックリスト

新しい設問カードレイアウトとナビゲーションを導入したため、リリース前に以下の観点での手動確認を推奨します。

- **レスポンシブ挙動**: 1440px / 768px / 375px の各ビューポートで、与件文パネルの追従と設問カードのリフローが崩れていないかを確認します。
- **目次・ステッパーのキーボード操作**: ピル型 TOC と「前の設問 / 次の設問」ナビが `Tab` と矢印キーで操作でき、`aria-current` のハイライトが現在の設問を示しているかを確認します。
- **アンカーリンク**: 各設問ヘッダのリンクコピーとスムーズスクロールが正しく動作し、アンカー到達時に軽いハイライトが 2 秒間表示されるかを確認します。
- **文字数カウンター**: 制限値に近づいた際に残字数の色がブランドカラーから注意色へ変化するかを確認します。
- **アクセシビリティ**: カラーコントラスト比が WCAG 2.2 AA を満たしているか、スクリーンリーダーで `role="region"` と `aria-labelledby` が読み上げられるかを確認します。
- **状態保持**: ヒントの開閉状態が `localStorage` に保存され、ページ再訪時に既読情報が維持されるかを確認します。

## 開発プロセスの効率化メモ (#codec 活用記録)

- 生成 AI 支援 IDE「#codec」を活用し、SaaS 開発の初期プロトタイピングを大幅に短縮。従来は数か月〜数年かかっていた共通機能の整備が、要件ヒアリング当日にカスタム実装へ落とし込める生産性 (体感 30 倍) を実現。
- ノーコード / ローコード連携を前提としたモジュール分割・API 設計を行うことで、ドメイン固有ロジックの差し替えや UI 調整を即日対応できる体制を構築。
- #codec を通じてドキュメント草案、テストデータ生成、Streamlit コンポーネントの試作を並行実行することで、実装とレビューのループを高速化。生成物は本リポジトリに順次反映し、再利用可能なテンプレートとして蓄積する方針。

## ライセンス

本リポジトリは学習用途のサンプル実装です。商用利用を行う際は適宜ライセンスやデータ利用に関する合意を取得してください。
