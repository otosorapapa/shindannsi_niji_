# 中小企業診断士二次試験対策 Webアプリ開発アウトライン

## 概要
中小企業診断士二次試験対策を効率化するための学習支援 Web アプリの全体像を整理したアウトラインです。過去問演習から AI 採点、学習履歴の可視化まで一連の学習サイクルをオンライン上で完結できる体験を提供します。

## 機能一覧

### 過去問演習（年度・事例別）
- 年度および事例 I〜IV をフィルターして歴代の試験問題を検索・選択。
- 問題文を画面に表示し、設問ごとに記述式の解答欄を提供。
- 文字数制限、設問単位での入力、途中保存に対応。
- 問題データベースを整備し、年度・事例での検索や設問情報の取得を容易にする。

### 模擬試験モード
- 事例 I〜IV を通しで解く本番形式の模擬試験と、ランダムに構成した演習セットを提供。
- 制限時間タイマーの表示や、解答提出後の一括採点で本番環境を再現。
- 模試結果を総合点・科目別点で可視化し、履歴を保存して推移を確認可能。

### 記述式解答入力 UI
- 問題文・設問文と解答入力欄を同一画面に配置し、文章作成を支援。
- 文字数カウンター、改行・段落整形補助、メモ欄などの入力支援機能を提供。
- 事例 IV の数値問題に備えて図表・数式入力、下書き保存に対応。

### AI 自動採点・フィードバック
- OpenAI Codex / GPT などの生成 AI を用いてユーザー答案を即時採点。
- 模範解答・採点基準との比較で部分点を算出し、設問ごとの得点と理由を提示。
- フィードバックには得点根拠と不足要素を明示し、履歴としてデータベースに保存。

### 出題意図・解説表示
- 問題ごとに出題者の意図や解法ポイントを整理した解説を表示。
- 採点後の閲覧を基本としつつ、学習モードではヒントとして事前参照を許可。
- 経営課題・採点着眼点など答案改善に役立つ情報を提供。

### 学習履歴・進捗管理
- 学習履歴（日時・問題・得点・所要時間）を一覧化し、ダッシュボードで可視化。
- 事例別平均点、得意・不得意分野のグラフ表示、学習継続バッジなどモチベーション支援を実装。
- 履歴データを CSV / Excel 形式でエクスポート可能。

### 模範解答表示・比較
- AI 採点後に模範解答・想定解答例を閲覧可能にし、ユーザー答案と並列表示。
- 重要キーワードをハイライトして比較を容易にし、キーワード採点機能と連動。
- 模範解答の骨子を抽出し、ユーザー答案の網羅状況を確認できるチェック機能を提供。

### キーワード採点・分析
- 問題ごとの重要キーワードを登録し、ユーザー答案との照合で部分点を算出。
- 形態素解析・類義語辞書を活用し、表現揺れにも対応。
- キーワード評価結果をフィードバックに反映し、採点根拠の説明性を高める。

### ユーザーアカウント・ログイン
- Google OAuth によるワンクリックログインを採用し、無料・有料プランを区別。
- 有料プランで AI 採点回数や詳細解説閲覧の上限を拡張。
- OAuth 連携解除、問い合わせ、規約表示などアカウント関連機能を備える。

### データ出力・外部連携
- 解答履歴・得点推移などを CSV / Excel 形式でエクスポート。
- 将来的な他システム連携や SNS 共有（例: Twitter 投稿）を想定した API を検討。

## ユーザーインターフェース構成

### ログイン画面
- Google OAuth とメール／パスワードサインインを提供。
- 新規登録案内やログイン後のアクセス制限でユーザーデータを保護。

### ホームダッシュボード
- 学習状況サマリー、主要機能へのナビゲーション、バッジ表示、使い方ガイドなどを集約。

### 過去問選択画面
- 年度・事例でフィルタし、企業概要や設問一覧を確認して演習を開始。

### 問題演習（解答入力）画面
- 左側に問題文、右または下部に設問別解答欄を配置したレイアウト。
- 文字数カウンター、保存ボタン、参照メモ、用語集ポップアップを搭載。

### 採点結果画面
- 設問ごとの得点とコメント、総合点、模範解答・解説タブ、再挑戦ボタンを表示。
- ユーザー解答との比較表示や重要キーワードハイライトを提供。

### 学習履歴（マイページ）
- 演習結果一覧、得点推移グラフ、分野別分析、エクスポート機能を実装。
- 有料プラン向けに詳細分析（類似度分析、回答傾向など）を追加表示。

### 設定・プラン管理
- プロフィール編集、パスワード変更、プラン購入・更新、OAuth 連携解除を実装。
- お問い合わせフォーム、利用規約などへのリンクも配置。

### ナビゲーション
- Streamlit のサイドバーやページセレクタで各画面を切り替えるシングルページ構成。
- PC ではサイドバー固定、モバイルではハンバーガーメニューでレスポンシブ対応。

## ユーザーフロー（ログインから採点まで）
1. **ユーザー認証**: ログイン画面で OAuth もしくはアカウント認証を行い、プロフィールを取得してダッシュボードへ遷移。
2. **問題選択**: 過去問演習または模擬試験を選択し、年度・事例や模試セットを決定。
3. **問題提示**: 選択した問題の設問を表示し、解答欄に記述。模試モードではタイマーを表示。
4. **解答提出**: 設問ごとに入力した答案を提出し、ユーザー ID・問題 ID と共にサーバーへ送信。
5. **AI 採点処理**: 模範解答と採点基準を取得し、キーワードマッチングと生成 AI を組み合わせた採点を実施。
6. **採点結果保存**: 得点・コメント・キーワード分析結果をデータベースに保存し、履歴へ反映。
7. **結果表示・振り返り**: 採点結果画面で点数とフィードバック、模範解答、解説を確認し、必要に応じて再挑戦や履歴確認、データ出力を行う。

## 技術スタック
- **Python & Streamlit**: フロントエンド／バックエンド統合とインタラクティブ UI の実装に使用。
- **OpenAI Codex / GPT 系モデル**: コーディング支援および本番環境での採点エンジンとして活用。
- **Pandas**: 問題・模範解答・学習履歴データの管理、集計、エクスポートに利用。
- **Scikit-learn**: 自然言語処理やキーワード分析、類似度計算、教師あり学習モデルの試作に活用。
- **SQLite（将来的には PostgreSQL / MySQL 等へ拡張）**: ユーザー情報、問題データ、採点結果、履歴の永続化。
- **Google OAuth**: ワンクリックログインとプラン管理の基盤となる認証機構。
- **OpenAI API**: 採点処理での LLM 呼び出し、プロンプトベースのスコア出力、フィードバック生成。
- **その他ライブラリ**: PDF 解析（PyPDF2、pdf2image、Tesseract）、グラフ描画（Plotly、Matplotlib）、形態素解析（Janome、MeCab）など。

## Codex / LLM 活用方針
- **UI 実装支援**: Streamlit コンポーネントやレイアウトコードの生成・補完。
- **データ処理支援**: Pandas／SQLAlchemy 操作や CSV エクスポートなど定型処理のテンプレート生成。
- **OAuth・API 連携**: Google OAuth や OpenAI API 実装例の提案とコード補完。
- **採点ロジック構築**: 自然言語処理関数、類似度計算、プロンプト設計の支援。
- **レビュー・デバッグ**: エラー解析や改善案提示によるペアプログラミング的支援。
- **ドキュメント生成**: Docstring やリリースノートなどの初稿生成を支援。

## AI 採点設計方針

### キーワードマッチングによる基礎評価
- 設問ごとに重要キーワードを登録し、語幹統一・類義語対応を行った上で網羅性を評価。
- キーワード数や重要度に応じた部分点を計算し、基礎スコアとして利用。

### 構文解析・文章構造チェック
- 因果関係や指定された論述構造（例: 原因→結果）を満たしているかを解析。
- 文法的な整合性や主語述語の一致を確認し、必要に応じて減点要素として扱う。

### 生成 AI による柔軟な採点
- 問題文・模範解答・ユーザー解答を入力し、LLM に設問ごとの点数と理由の出力を指示。
- LLM の判断をベースにしつつ、キーワードマッチ結果で補正してハイブリッドスコアを算出。
- フィードバックコメントは不足要素や評価理由を具体的に明示した形式で提示。

### 事例 IV（財務）への対応
- 数値解答の正確性チェックや許容誤差判定をルールベースで実装。
- 計算プロセスの記述を解析し、途中式の妥当性も確認。

### 継続的な精度向上
- 収集した解答データと採点結果を分析し、プロンプトやキーワードリスト、モデルを継続的に調整。
- 匿名化データを用いたモデル再学習で採点精度を高め、ユーザーへの説明責任を果たす。

## 学習サイクルの定着支援
- AI 採点で得られたフィードバックを起点に、模範解答・解説・履歴分析を行う一連の復習フローを整備。
- ダッシュボードでの進捗可視化やバッジ機能でモチベーションを維持。
- データ出力や外部連携により、受験仲間との共有や個別分析にも対応。

本アウトラインを基に、短期間で MVP を構築しつつ、AI 採点の精度向上と学習価値の最大化を目指します。
